---
name: breakdown
description: |-
  plan.mdからimplementation.mdを生成するタスク分解エージェント。
  実装計画を実行可能なタスクリストに変換する。
  「/breakdown」「タスク分解」と依頼された時に使用。
disable-model-invocation: true
---

# /breakdown コマンド

plan.md の実装方針から implementation.md を生成する。

## 役割分担

- **plan.md**: 「何を作るべきか」「なぜその設計が良いのか」（設計判断）
- **implementation.md**: 「どう実装するか」の詳細タスクリスト（実行計画）

## 前提条件

以下を確認してから実行。満たさない場合は中止し理由を報告:

1. plan.md が存在する
2. plan.md に実装方針・フェーズ分けが含まれている

## 実行手順

### 1. 引数解析
- 引数あり: 指定パスの plan.md を使用
- 引数なし: プロジェクトルート直下の plan.md を使用

### 2. コンテキスト読み込み
- plan.md の内容を読み込み
- CLAUDE.md でプロジェクト固有の制約を確認

### 3. タスク分解

plan.md の各フェーズを 1-2時間粒度のタスクに分解。
不明点は `[NEEDS CLARIFICATION: 質問]` を挿入（最大3箇所）:

| 項目 | 内容 |
|-----|------|
| タスクID | TASK-001 形式 |
| タイトル | 具体的な作業内容 |
| 推定時間・難易度 | 例: 2h・中 |
| タスク種別 | 新機能実装 / リファクタリング / テスト追加 / バグ修正 / ドキュメント / フロントエンド・UI実装 |
| 目的 | なぜ必要か |
| 実装内容 | ファイルパス、修正箇所 |
| 成功基準 | テスト条件、確認項目 |
| 依存タスク | 前提となるタスクID |
| 並列実行可否 | **P** マークで明示 |

### 4. 並列実行可能タスクの特定

**Pマーク付与基準**:
- 依存タスクがない
- 他タスクと同じファイルを編集しない
- 独立して実行可能

### 5. implementation.md 保存

プロジェクトルート直下に保存。

テンプレート: `~/.claude/skills/breakdown/templates/implementation.md`

## タスク分解のベストプラクティス

→ 詳細: `~/.claude/skills/breakdown/references/task-breakdown.md`

| パターン | 概要 |
|---------|------|
| TidyFirst | 構造整理を先に、機能追加は後で |
| TDD分割 | テスト追加と実装を分離 |
| 粒度目安 | 易(0.5-1h)、中(1-2h)、難(2-3h)、3h超は分解 |

## 出力形式

```
## implementation.md 生成完了

**保存先**: implementation.md
**タスク数**: X個
**フェーズ数**: X
**並列実行可能**: X個（Pマーク付き）

**次のステップ**:
- `/implement` で自動実行
- または手動で順次実装
```

## 成功基準

このコマンドの実行は以下を満たしたとき成功とみなす:

1. plan.md の全フェーズが 1-2時間粒度のタスクに分解されている
2. 各タスクに種別・推定時間・難易度・成功基準が明記されている
3. 並列実行可能タスクに Pマークが付与されている
4. implementation.md がプロジェクトルートに保存されている

## 完了チェックリスト

- [ ] 全フェーズがタスク化されている
- [ ] 各タスクに推定時間・難易度・種別が明記されている
- [ ] ファイルパス・修正箇所が具体的
- [ ] 成功基準が測定可能
- [ ] 依存関係が明確
- [ ] 並列実行可能タスクにPマーク付与
