# コードレビュー自己検証（Self-Reflection）

レビュー結果を出力する前に、各指摘を以下の観点で再検証する。
不正確なものは除外し、スコアを調整する。

## 検証項目

### 1. 位置検証
指摘した `ファイル:行番号` に該当コードが存在するか確認。

- 存在しない → 除外（確信度0）

### 2. 構文検証
修正案を適用した場合、構文エラーにならないか確認。

- エラーになる → 修正案を修正、または除外

### 3. コンテキスト整合
修正案が周辺コード・既存実装と矛盾しないか確認。

- 矛盾する → 確信度を下げる（-2〜3）

### 4. 重複排除
同一問題への複数指摘がないか確認。

- 重複あり → 最も適切な1つに統合

### 5. 過剰指摘フィルタ
以下に該当する指摘は除外:

- Lint/Formatter で自動修正可能なもの
- 単なるスタイル好みの押し付け
- 明確な根拠なく「〜すべき」と主張するもの

## 確信度の基準

| スコア | 意味 | 例 |
|--------|------|-----|
| 9-10 | 明確な問題 | バグ、セキュリティ脆弱性、データ損失リスク |
| 7-8 | 高確度で問題 | N+1クエリ、未処理例外、境界値漏れ |
| 5-6 | 改善推奨 | 可読性低下、責務混在、テスト不足 |
| 3-4 | 提案レベル | 命名改善、リファクタリング候補 |
| 1-2 | 参考情報 | 別解の紹介、将来の検討事項 |

**注意**: 確信度5以下は「議論の余地あり」を意味する。レビュイーが意図的な選択であれば却下可能。
