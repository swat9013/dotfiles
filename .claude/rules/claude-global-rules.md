---
paths: .claude-global/rules/**
---

# グローバル Rules ガイド

## 制約

| 項目 | 値 |
|------|-----|
| 推奨サイズ | 200行以下 |
| 命名規則 | kebab-case |
| 形式 | Markdown + frontmatter |
| 注意 | `~/.claude/rules/` ではpathsが無視される（#21858） |

## 既知の不具合

| Issue | 影響 | 対策 |
|-------|------|------|
| #16299 | path指定rulesがセッション開始時に全件ロードされる | ファイル数・サイズを最小限に |
| #21858 | `~/.claude/rules/` のpathsは無視される | pathsに依存しない設計 |
| #13905 | YAML配列形式（ハイフン複数行）が動作しない | カンマ区切りワンライナー |

## frontmatter paths記法

```yaml
# NG: 動作しない（#13905）
paths:
  - src/**
  - test/**

# OK: カンマ区切りワンライナー
paths: src/**, test/**

# ブレース含む場合はクォート必要
paths: "src/**/*.{ts,tsx}"
```

## グローバル vs プロジェクト rules

| 判断基準 | グローバル | プロジェクト |
|---------|-----------|------------|
| 適用範囲 | 全プロジェクト | 単一プロジェクト |
| 内容 | 普遍的なパス規約 | プロジェクト固有規約 |
| 例 | 「CLAUDE.md編集ガイド」 | 「API層のルール」 |

## 良いRulesの特徴

- **パス固有**: globで明確に絞り込める
- **自己完結**: 他ファイル参照なし
- **アクション指向**: 「〜すること」「〜しないこと」
- **200行以下**: 超える場合はskills/への移動を検討

## 含めるべき内容

- 全プロジェクト共通のパス規約
- Claude Code設定ファイルのガイドライン

## 避けるべき内容

- プロジェクト固有のルール → プロジェクトのrules/へ
- 汎用的な原則 → CLAUDE.mdへ
- ワークフロー → skills/へ

## アンチパターン

| パターン | 対策 |
|---------|------|
| `paths: "**/*"` | CLAUDE.mdへ移動 |
| 300行超 | skills/へ分離 |
| 複数ルールで重複 | CLAUDE.mdに集約 |
| YAML配列形式のpaths | カンマ区切りワンライナーに |
