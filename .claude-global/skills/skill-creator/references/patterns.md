# スキル設計パターン

## Progressive Disclosure

コンテキストウィンドウは共有資源。段階的に情報を開示する。

### 3層構造

| 層 | 内容 | 読み込みタイミング |
|----|------|-------------------|
| frontmatter | name + description | 常時（~100語） |
| SKILL.md本文 | 手順・ガイドライン | スキル起動時 |
| references | 詳細ドキュメント | 必要時のみ |

### 分離の判断基準

**SKILL.md本文に含める:**
- 必ず実行する手順
- 基本的なガイドライン
- 簡潔な例

**referencesに分離:**
- APIリファレンス
- 詳細なスキーマ定義
- 長い例・バリエーション
- ドメイン固有の知識

## ワークフローパターン

### シーケンシャル

順番に実行する手順:

```markdown
## 手順

1. 入力を分析
2. 変換を実行
3. 出力を検証
```

### 条件分岐

状況に応じて異なるフローを実行:

```markdown
## 手順

1. タイプを判定:
   - 新規作成 → 「作成フロー」へ
   - 編集 → 「編集フロー」へ

### 作成フロー
...

### 編集フロー
...
```

## 出力パターン

### テンプレート型

厳格な形式が必要な場合:

```markdown
## 出力形式

必ず以下の構造で出力:

# タイトル
## 概要
## 詳細
## 結論
```

### 例示型

柔軟な出力が許容される場合:

```markdown
## 出力例

入力: "ログイン機能を追加"
出力:
- ログインフォームコンポーネント作成
- 認証APIエンドポイント実装
- セッション管理追加
```

## リソース選択ガイド

| リソース種別 | 用途 | 例 |
|-------------|------|-----|
| scripts/ | 反復実行するコード | validate.py, convert.sh |
| references/ | 参照ドキュメント | api_docs.md, schema.json |
| assets/ | 出力用ファイル | template.pptx, logo.png |

## アンチパターン

避けるべき設計:

1. **冗長な説明**: Claudeは賢い。既知の情報を繰り返さない
2. **深いネスト**: A→B→C の参照チェーンは避ける
3. **巨大なSKILL.md**: 500行超えたらreferencesに分離
4. **曖昧なdescription**: トリガーキーワードを明示的に含める
