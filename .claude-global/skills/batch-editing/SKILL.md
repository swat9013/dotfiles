---
name: batch-editing
description: |
  複数ファイルへの定型処理・一括変更のワークフローガイド。
  閾値判断、実行パターン優先順、必須プラクティスを提供する。
  「複数ファイル」「一括変更」「バッチ編集」「定型処理」「10ファイル以上」と依頼された時に参照する。
user-invocable: false
---

# 複数ファイル定型処理

## 閾値判断

- 1-2ファイル: 直接実行
- 3ファイル以上: 計画→実行の分離を検討
- 10ファイル以上: サブエージェント並列化必須

## 実行パターン（優先順）

1. **ツール活用**: Glob → Grep → 並列 Read/Edit（最優先）
2. **シェル直接**: `for f in *.ext; do ...; done`（単純イテレーション）
3. **find + exec**: 再帰検索・複雑条件
4. **サブエージェント分割**: 5-10ファイルずつ委譲

## 必須プラクティス

- 段階的スケーリング: 1ファイルで検証 → 全体実行
- 原子的更新: `tmp && mv` パターン（中間状態回避）
- 冪等性: 事前チェックで再実行可能に
- 検証基準明確化: 成功条件をプロンプトに含める

## 失敗時

- 1ファイル失敗で即停止し報告
- 部分成功の明示: 完了/失敗ファイルをリスト
