# CLAUDE.md 設計ガイド

## 概要

CLAUDE.mdはプロジェクト固有のコンテキストをClaudeに提供するファイル。プロジェクトルートに配置され、常に参照される。

## ファイル制約

| 項目 | 値 |
|------|-----|
| 推奨サイズ | 150行以下 |
| 配置場所 | プロジェクトルート |
| 形式 | Markdown（frontmatter不要） |

## 設計原則

1. **プロジェクト固有**: 汎用知識より具体的なルール
2. **簡潔**: 150行以下推奨
3. **構造化**: 表・箇条書きの活用

## CLAUDE.md vs rules/ vs skills/

比較表と使い分け判断フローは [context-architecture.md](./context-architecture.md) を参照。

## CLAUDE.md vs README.md

| 観点 | CLAUDE.md | README.md |
|------|-----------|-----------
| 対象読者 | Claude | 人間（開発者） |
| 目的 | コンテキスト提供 | プロジェクト紹介 |
| 内容 | 開発に必要な制約 | セットアップ手順 |
| 詳細度 | 簡潔・要点のみ | 詳細な説明 |

README.mdとCLAUDE.mdは補完関係。重複を避け、それぞれの役割に集中する。

## 推奨構造

```markdown
# CLAUDE.md

## リポジトリの概要
このプロジェクトが何か（1-2文）

## コマンド
```bash
# よく使うコマンド
npm run dev
npm test
```

## アーキテクチャ
ディレクトリ構造と役割

## 命名規則
プロジェクト固有の命名ルール

## 重要な制約
守るべき原則・制限
```

## 良いCLAUDE.mdの特徴

### 含めるべき内容

- **プロジェクト構造**: ディレクトリの役割
- **重要なコマンド**: ビルド、テスト、デプロイ
- **固有の命名規則**: ファイル名、変数名のパターン
- **アーキテクチャ上の制約**: レイヤー構造、依存関係
- **開発ワークフロー**: ブランチ戦略、コミット規約

### 含めるべきでない内容

- 一般的なプログラミング原則のみ（Claudeは既知）
- README.mdとの重複
- 詳細すぎる実装ガイド（→ rules/ または docs/）
- 長いコード例（→ 別ファイル参照）

## 書き方ガイド

### 簡潔に

```markdown
## 悪い例
このプロジェクトは、ユーザー管理機能を提供するWebアプリケーションです。
フロントエンドはReactで構築され、バックエンドはNode.jsで...（続く）

## 良い例
ユーザー管理WebアプリReact + Node.js構成。
```

### 表・箇条書きを活用

```markdown
## 悪い例
srcディレクトリにはコンポーネントが入っていて、apiディレクトリには
APIクライアントが入っていて、utilsには...

## 良い例
| ディレクトリ | 役割 |
|------------|------|
| src/ | Reactコンポーネント |
| api/ | APIクライアント |
| utils/ | 共通ユーティリティ |
```

### コマンドは実行可能な形で

```markdown
## 悪い例
テストを実行するにはnpm testコマンドを使います。

## 良い例
```bash
npm test              # 全テスト実行
npm test -- --watch   # 監視モード
```
```

## アンチパターン

| パターン | 問題点 | 対策 |
|---------|--------|------|
| 150行超 | 情報過多、読まれない | 150行以下に圧縮 |
| 一般原則のみ | プロジェクト固有情報なし | 固有の情報を追加 |
| README重複 | メンテナンス二重化 | 補完関係にする |
| 詳細すぎる | CLAUDE.mdの役割逸脱 | rules/やdocs/に分離 |
