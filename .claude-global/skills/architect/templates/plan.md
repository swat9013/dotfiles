# 設計計画テンプレート

`Architect` エージェントで生成される plan.md のテンプレート。

---

```markdown
# 設計計画

## 基本情報

- **作成日**: YYYY-MM-DD
- **ステータス**: Draft | Review | Approved
- **関連ドキュメント**: [report.md などへのリンク]

---

## 1. 背景・目的

### 背景

[この設計が必要となった経緯や状況]

### 目的

[達成したいこと、解決したい課題]

### 成功基準

- [ ] [測定可能な成功基準1]
- [ ] [測定可能な成功基準2]

---

## 2. 現状分析

### 既存アーキテクチャ

[現在のシステム構造の概要]

### 問題点

| 問題 | 影響 | 優先度 |
|-----|------|--------|
| [問題1] | [影響範囲] | High/Medium/Low |
| [問題2] | [影響範囲] | High/Medium/Low |

### 技術的負債

[既存の技術的負債、将来への影響]

---

## 3. 設計提案

### 選択肢

#### オプション A: [名称]

**概要**: [1-2段落で説明]

**利点**:
- [利点1]
- [利点2]

**欠点**:
- [欠点1]
- [欠点2]

**コスト**: [開発工数、運用コスト]

**リスク**: [技術リスク、移行リスク]

#### オプション B: [名称]

[同様の構造]

### 推奨案: [選択したオプション]

**選定理由**:
1. [理由1]
2. [理由2]

**トレードオフの判断**:
- [何を優先し、何を妥協したか]

---

## 4. 設計詳細

### アーキテクチャ図

```
[ASCII図、またはMermaid図]
```

### コンポーネント構成

| コンポーネント | 役割 | 技術スタック |
|--------------|------|-------------|
| [名称] | [責務] | [使用技術] |

### データフロー

[データの流れ、依存関係]

### 依存関係

```
[上位層]
   ↓
[中位層]
   ↓
[下位層]
```

---

## 5. 実装方針

### フェーズ分け

#### Phase 1: [フェーズ名]（推定: Xh）

**目的**: [このフェーズで達成すること]

**タスク概要**:
- [タスク1]
- [タスク2]

**成果物**:
- [成果物1]

**品質ゲート**:
- [ ] [確認項目1]

#### Phase 2: [フェーズ名]（推定: Xh）

[同様の構造]

### 移行戦略

[既存システムから新システムへの移行方法]

- **ロールバック計画**: [問題発生時の復旧方法]
- **段階的移行**: [部分的な適用の可否]

---

## 6. 考慮事項

### セキュリティ

- [セキュリティ上の懸念と対策]

### パフォーマンス

- [パフォーマンス要件と対策]

### スケーラビリティ

- [将来の拡張性への配慮]

### 運用・保守

- [運用時の注意点、保守性への配慮]

---

## 7. リスクと対策

| リスク | 影響度 | 発生確率 | 対策 |
|-------|--------|---------|------|
| [リスク1] | High/Medium/Low | High/Medium/Low | [対策] |
| [リスク2] | High/Medium/Low | High/Medium/Low | [対策] |

---

## 8. 今後の作業

### 次のステップ

1. `/breakdown` で implementation.md 生成
2. `/implement` でタスク実行
3. 実装後に ADR 作成

### 未解決事項

- [ ] [実装前に解決すべき課題]
- [ ] [追加調査が必要な項目]

### 参考資料

- [タイトル](URL) - [概要]
```

---

## 記入ガイド

### フェーズ分けの原則

| 原則 | 説明 |
|-----|------|
| 価値の早期提供 | 早いフェーズで価値を提供できる順序 |
| リスク管理 | 高リスクなタスクを早期に実施 |
| 依存関係 | 依存するタスクを先に完了 |
| テスト容易性 | テスト可能な単位で区切る |

### 成功基準の書き方

| 良い例 | 悪い例 |
|-------|--------|
| API応答時間が100ms以下 | パフォーマンスが良い |
| 単体テストカバレッジ80%以上 | テストを書く |
| 既存の全E2Eテストが通過 | 動作する |

### 選択肢比較の観点

| 観点 | 説明 |
|-----|------|
| 複雑度 | 実装・理解・保守のしやすさ |
| 開発工数 | 実装にかかる時間 |
| 移行コスト | 既存システムからの移行難易度 |
| 運用負荷 | 運用時の監視・対応の手間 |
| 拡張性 | 将来の要件変更への対応 |
| テスト容易性 | テストの書きやすさ |
