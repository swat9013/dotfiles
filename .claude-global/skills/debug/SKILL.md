---
name: debug
description: バグ調査・根本原因特定。5 Whysで直接原因と根本原因を区別して特定。「デバッグ」「バグ調査」「エラー解析」「原因調査」「不具合」「動かない」「エラーが出る」「トラブルシュート」と依頼された時に使用。
disable-model-invocation: true
---

# Debug

バグ調査を支援し、根本原因の特定と修正案を提示するスキル。

## 使用方法

```
/debug TypeError: Cannot read property 'x' of undefined
/debug ログイン後にセッションが切れる問題
/debug logs/error.log
```

## 前提条件

1. エラーメッセージ、症状、またはログファイルが提供されている
2. 関連するソースコードにアクセス可能

## 実行手順

### 1. 状況把握

- エラーメッセージ/スタックトレース分析
- 再現手順、発生頻度、影響範囲を確認
- 不明点は `[NEEDS CLARIFICATION: 質問]` を挿入（最大3箇所）

### 2. 原因特定

- エラー発生箇所と関連コード調査
- 仮説立案（直接原因 → 根本原因）
- ログ/デバッガで検証

**5 Whys メソッド**:
1. なぜエラーが発生した？ → 直接原因
2. なぜその直接原因が存在した？
3. なぜ...（根本原因に到達するまで繰り返す）

### 3. 対応判定

| 種別 | 対応 |
|------|------|
| 単純バグ（タイポ、null未チェック等） | 即修正 + テスト追加 |
| 技術的負債（設計欠陥） | パッチ + docs/に記録 |

### 4. 結果出力

```markdown
# デバッグレポート

## 問題: [症状]
## 原因: 直接=[X]、根本=[Y]
## 判定: [単純バグ/技術的負債]

## 修正案
[具体的な修正内容 - ファイル名、行番号、コード例]

## テスト追加
[追加すべきテストケース]

## 次のアクション
1. [ステップ]
```

## 成功基準

1. 直接原因と根本原因が明確に区別して特定されている
2. 修正案が具体的（ファイル名、行番号、コード例を含む）
3. 再発防止のためのテスト追加案が提示されている

## 完了チェックリスト

- [ ] 直接原因と根本原因を明確に区別した
- [ ] 修正案が具体的（ファイル名、行番号、コード例）
- [ ] テスト追加案を含めた
- [ ] `[NEEDS CLARIFICATION]` が残っている場合はユーザーに確認を求めた

## 原則

- **5 Whys**: 表面的な原因で止まらず根本原因まで掘り下げる
- **仮説駆動**: 推測で修正しない、仮説を立てて検証
- **最小再現**: 問題を再現する最小のケースを特定
